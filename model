MODEL sd =

   ENVIRONMENT SYSTYPE = 'sys5.3';

   TITLE 'Callers helper';

   SYSTEM '~/sd/system';

   LIBRARY the_libe = '~/sd/src';

   POOL the_pool = '~/sd/pool';

   DEFAULT FOR ?* =
      @the_libe;
      SHELL '/com/sh';
      USE_POOL the_pool;
   END;

   DEFAULT FOR ?*.c =
      DEPENDS_SOURCE
         sd.h @ the_libe;
         database.h @ the_libe;
         '/usr/include/malloc.h';
      DEPENDS_TOOLS
         '/usr/apollo/lib/cc.m68k';
      TRANSLATE
         /usr/apollo/lib/cc.m68k %SOURCE -b %RESULT -type -systype sys5.3 -natural @
                               -idir ~/sd/src -def HAVE_SYS5                    @
                               %CR_OPT(-dba) %CR_OPT(-dbs) %CR_OPT(-ndb)        @
                               %OPTION(-ninfo) %OPTION(-info)                   @
                               %OPTION(-config) %OPTION(-nalign)                @
                               %CR_OPT(-cpu) %CR_OPT(-def) %OPTION(-nwarn)      @
                               %OPTION(-comchk) %OPTION(-cond) %OPTION(-subchk) @
                               %OPTION(-exp) %CR_OPT(-opt)
      %DONE;
   END;

   DEPENDS_TOOLS
      '/com/bind';

   USE_POOL
      the_pool;

   NIL_TRANSLATION;

   SHELL '/com/sh';

   DEPENDS_RESULT


   AGGREGATE stuff =
      TRANSLATE
         /com/bind - <<!
             %RESULT_OF(?*.c).bin
         -b %RESULT -nound
         !
      %DONE;

      SHELL '/com/sh';

      DEPENDS_RESULT

      %INCLUDE '~/sd/sd.ins.sml';
   END OF stuff;


   AGGREGATE dom_dialog =
      SHELL '/com/sh';

      TRANSLATE
         /com/cpf %RESULT_OF(sdui-domain.c).bin %RESULT
      %DONE;

      DEPENDS_RESULT

      ELEMENT sdui-domain.c @the_libe =
            DEPENDS_SOURCE
                   '/usr/apollo/include/base.h';
                   '/usr/apollo/include/error.h';
                   '/usr/apollo/include/gpr.h';
                   '/usr/apollo/include/dialog.h';
                   '/usr/include/string.h';
                   '/wba/sd/sd_dialog.ins.c';
      END OF sdui-domain.c;
   END OF dom_dialog;


   AGGREGATE sdreal =
      DEPENDS_SOURCE
         'sd_dialog_dpd.bin';

      TRANSLATE
         /com/bind - <<!
             %RESULT_OF(stuff)
             %RESULT_OF(dom_dialog)
             sd_dialog_dpd.bin
         -b sd
         !
      %DONE;

      SHELL '/com/sh';

      DEPENDS_RESULT

      stuff;
      dom_dialog;
   END OF sdreal;


   AGGREGATE sdebug =
      DEPENDS_SOURCE
         'sd_debug_dialog_dpd.bin';

      TRANSLATE
         /com/bind - <<!
             %RESULT_OF(stuff)
             %RESULT_OF(dom_dialog)
             sd_debug_dialog_dpd.bin
         -b sdebug
         !
      %DONE;

      SHELL '/com/sh';

      DEPENDS_RESULT

      stuff;
      dom_dialog;
   END OF sdebug;


   AGGREGATE sdtty =
      TRANSLATE
         /com/bind - <<!
             %RESULT_OF(?*.c).bin
             %RESULT_OF(stuff)
         -b sdtty
         !
      %DONE;

      SHELL '/com/sh';

      DEPENDS_RESULT

      stuff;

      ELEMENT sdui-tty.c @the_libe =
         DEPENDS_SOURCE
            sdmatch.h @ the_libe;
            sdui-ttu.h @ the_libe;
            '/usr/include/stdlib.h';
            '/usr/include/string.h';
            '/usr/include/stdio.h';
            '/usr/include/ctype.h';
      END OF sdui-tty.c;

      ELEMENT sdui-ttu.c @the_libe =
         DEPENDS_SOURCE
            sdui-ttu.h @ the_libe;
            '/usr/include/unistd.h';
            '/usr/include/stdlib.h';
            '/usr/include/string.h';
            '/usr/include/stdio.h';
            '/usr/include/signal.h';
            '/usr/include/termios.h';
      END OF sdui-ttu.c;

      ELEMENT sdmatch.c @the_libe =
         DEPENDS_SOURCE
            sdmatch.h @ the_libe;
            '/usr/include/string.h';
            '/usr/include/stdio.h';
            '/usr/include/ctype.h';
      END OF sdmatch.c;
   END OF sdtty;

END OF sd;
